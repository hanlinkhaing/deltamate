<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
        <meta http-equiv="x-ua-compatible" content="ie=edge"/>

        <link rel="shortcut icon" type="image/png" th:href="@{/image/deltamate.png}"/>
        <title>Delta Mate Myanmar</title>

        <script type="application/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <!-- Bootstrap tooltips -->
        <script type="application/javascript" src="../../static/js/popper.min.js" th:src="@{/js/popper.min.js}"></script>
        <!-- Bootstrap core JavaScript -->
        <script type="application/javascript" src="../../static/js/bootstrap.min.js" th:src="@{/js/bootstrap.min.js}"></script>
        <!-- MDB core JavaScript -->
        <script type="application/javascript" src="../../static/js/mdb.min.js" th:src="@{/js/mdb.min.js}"></script>
        <!-- Initializations -->

        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"/>
        <!-- Bootstrap core CSS -->
        <link href="../../static/css/bootstrap.min.css" rel="stylesheet" th:href="@{/css/bootstrap.min.css}"/>
        <!-- Material Design Bootstrap -->
        <link href="../../static/css/mdb.min.css" rel="stylesheet" th:href="@{/css/mdb.min.css}"/>
        <!-- Your custom styles (optional) -->
        <link href="../../static/css/style.min.css" rel="stylesheet" th:href="@{/css/style.min.css}"/>
    </head>

    <body>

        <!-- Navbar -->
        <nav class="navbar fixed-top navbar-expand-lg navbar-light scrolling-navbar" style="background-color: #929fba"
             id="nav_bar">
            <div class="container">

                <!-- Brand -->
                <a class="navbar-brand waves-effect">
                    <div class="logo-image">
                        <img src="../../static/image/deltamate.png" class="img-fluid" th:src="@{/image/deltamate.png}"
                             style="width: 15%;height: 15%">
                        <strong class="white-text">Delta Mate Myanmar</strong>
                    </div>
                </a>

                <!-- Collapse -->
                <button class="navbar-toggler" type="button" data-toggle="collapse"
                        data-target="#navbarSupportedContent"
                        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Links -->
                <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">

                    <!-- Right -->
                    <ul class="navbar-nav nav-flex-icons">
                        <li class="nav-item">
                            <a class="nav-link waves-effect" th:href="@{/}">Home</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="workStandardDropDown" role="button"
                               data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                WorkStandard
                            </a>
                            <div class="dropdown-menu" aria-labelledby="workStandardDropDown">
                                <a  class="dropdown-item" th:href="@{'/workStandard'}">
                                    All WorkStandards
                                </a>
                                <a class="dropdown-item" th:href="@{'/workStandard/addWorkStandard'}">
                                    Add WorkStandard
                                </a>
                            </div>
                        </li>

                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="userDropDown" role="button"
                               data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                User
                            </a>
                            <div class="dropdown-menu" aria-labelledby="userDropDown">
                                <a  class="dropdown-item" th:href="@{'/users'}">
                                    All Users
                                </a>
                                <a class="dropdown-item" th:href="@{'/users/addUser'}">
                                    Add User
                                </a>
                            </div>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link waves-effect" data-toggle="modal" data-target="#signModal">
                                Sign In/Sign Up
                            </a>
                        </li>

                        <li class="nav-item" sec:authorize="!isAuthenticated()">
                            <a class="nav-link text-light" th:href="@{/login}">
                                <i class="fa fa-sign-in-alt" aria-hidden="true"></i> Login</a>
                        </li>
                        <li class="nav-item" sec:authorize="!isAuthenticated()">
                            <a class="nav-link text-light" >
                                <i class="fa fa-user-plus" aria-hidden="true"></i> Register</a>
                        </li>
                        <li class="nav-item">
                            <form method="POST" th:action="@{/logout}" sec:authorize="isAuthenticated()">
                                <button class="nav-link text-light border-0" style="background-color: #929fba">
                                    <i class="fa fa-sign-out-alt" aria-hidden="true"></i> Sign Out</button>
                            </form>
                        </li>

                    </ul>

                </div>

            </div>
        </nav>
        <!-- Navbar -->

        <!-- The Modal -->
        <div class="modal fade" id="signModal">
            <div class="modal-dialog modal-full-height">
                <div class="modal-content" style="background-color: #929fba">

                    <!-- Modal Header -->
                    <div class="modal-header">
                        <a class="navbar-brand waves-effect" href="#">
                            <i class="fas fa-book-open" style="color: #1c71ff"></i>
                            <strong class="white-text">BOOKS</strong>
                        </a>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>

                    <!-- Modal body -->
                    <div class="modal-body">
                        <form>
                            <div class="form-group">
                                <input type="email" class="form-control" id="email" placeholder="Enter email"
                                       style="background-color: #ccced2">
                            </div>
                            <div class="form-group">
                                <input type="password" class="form-control" id="pwd" placeholder="Enter password"
                                       style="background-color: #ccced2">
                            </div>
                            <div class="form-group form-check border-bottom">
                                <label class="form-check-label btn shadow-none border-0"
                                       style="background-color: #929fba">
                                    <input class="form-check-input" type="checkbox">
                                    Remember me
                                </label>
                                <a href="#" class="btn btn-primary float-right mr-0">SIGN IN</a>
                            </div>
                            <div class="form-group flex-center">
                                <a class="navbar-brand waves-effect" href="#">
                                    <u class="white-text font-italic">Forget Password!</u>
                                </a>
                            </div>
                            <div class="form-group flex-center">
                                <a class="navbar-brand waves-effect" href="#">
                                    <u class="white-text font-italic">Create an Account!</u>
                                </a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div layout:fragment="context">

        </div>

        <!--Footer-->
        <footer class="page-footer text-center font-small mt-4 wow fadeIn">

            <!-- Social icons -->
            <div class="pt-5 pb-4">
                <a href="https://www.facebook.com/hanlin.khaing" target="_blank">
                    <i class="fab fa-facebook-f mr-3"></i>
                </a>

                <a href="https://www.linkedin.com/in/han-lin-23902bab" target="_blank">
                    <i class="fab fa-linkedin mr-3"></i>
                </a>
            </div>
            <!-- Social icons -->

            <!--Copyright-->
            <div class="footer-copyright py-3">
                Â© 2019 Copyright:
                <a class="text-light" target="_blank">www.deltamate.com.mm</a>
            </div>
            <!--/.Copyright-->

        </footer>
        <!--/.Footer-->


        <script type="text/javascript">
            // Animations initialization
            new WOW().init();

        </script>
        <script th:inline="javascript">
            function replaceItemsInEdit(html) {
                console.log(html);
                $('#exftyListInEdit').replaceWith($(html));
            }
            $("#addExFtyInEdit").on("click", function (event) {
                event.preventDefault();
                var data = $('form').serialize();
                //data += '&param=addStyle';
                console.log(document.getElementById("hiddenStyleID").value);

                $.post('' + document.getElementById("hiddenStyleID").value+'/addExFtyInEdit', data, replaceItemsInEdit);
            });
        </script>
        <script th:inline="javascript">
            function replaceItems(html) {
                console.log(html);
                $('#exftyList').replaceWith($(html));
            }
            $("#addExFty").on("click", function (event) {
                event.preventDefault();
                var data = $('form').serialize();
                //data += '&param=addStyle';
                $.post('addWorkStandard/addExFty', data, replaceItems);
            });

            function userPasswordMatching() {
                var password = document.getElementById("password");
                var confirmP = document.getElementById("confirmPassword");
                if (password.value === confirmP.value) {
                    return true;
                } else {
                    document.getElementById("confirmPasswordError").innerHTML = "Password does not match!";
                    return false;
                }
            }

            function workStandardFormValidation(page) {
                var workStandardForm = document.getElementById("workStandardForm").elements;
                var result = true;
                for(var i = 0; i < workStandardForm.length; i++){
                    if(workStandardForm[i].type !== "submit" && (workStandardForm[i].value === null ||
                        workStandardForm[i].value === "" || workStandardForm[i].value === 0)){
                        if(!(workStandardForm[i].type === "file" && page === 'edit')){
                            result = false;
                            document.getElementById("workStandardError").innerHTML = "Please fill all fields!";
                            break;
                        }
                    }
                }
                return result;
            }
        </script>
    </body>
</html>